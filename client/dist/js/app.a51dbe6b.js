(function(){"use strict";var e={3061:function(e,t,n){var a=n(5130),r=n(3367),s=n(6768);function o(e,t,n,a,r,o){const c=(0,s.g2)("HeaderComponent"),i=(0,s.g2)("Intro"),u=(0,s.g2)("Comments"),l=(0,s.g2)("CreateComment");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(c),(0,s.bF)(i),(0,s.bF)(u),(0,s.bF)(l)],64)}function c(e,t,n,a,r,o){const c=(0,s.g2)("SearchInput"),i=(0,s.g2)("SearchResults");return(0,s.uX)(),(0,s.CE)("header",null,[(0,s.bF)(c),(0,s.bF)(i)])}const i={id:"searchContainer"};function u(e,t,n,a,r,o){const c=(0,s.gN)("mode");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bo)((0,s.Lk)("input",{type:"text",onInput:t[0]||(t[0]=(...e)=>a.changeSearchInput&&a.changeSearchInput(...e)),id:"search",placeholder:"Phone",autocomplete:"off"},null,544),[[c,e.searchValue]]),a.isCreate?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[1]||(t[1]=e=>{a.createTable()}),class:"create-table"},"Create")):(0,s.Q3)("",!0)])}var l=n(144);const m=(0,r.nY)({id:"store",state:()=>({searchInput:(0,l.KR)("Empty"),commentsCount:(0,l.KR)(0),likes:(0,l.KR)(0),dislikes:(0,l.KR)(0),isCreate:(0,l.KR)(!1),comments:(0,l.KR)([]),newComment:"",url:"https://checker.fantamas.com/api"}),actions:{changeSearchInput(e){this.searchInput=e,""!==this.searchInput?fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"search_phone",phone:this.searchInput})}).then((e=>e.json())).then((e=>{e?.data?.data?(this.isCreate=!0,this.comments=[]):this.isCreate=!1,this.comments=e.data.data.messages,this.commentsCount=e.data.data.data_of_phone.messages_count,this.likes=e.data.data.data_of_phone.likes,this.dislikes=e.data.data.data_of_phone.dislikes})).catch((e=>{console.log("Произошла ошибка:",e)})):console.log("Empty input")},createComment(e){let t=0;this.commentsCount+=1,"like-btn"==e.target.getAttribute("class")?(t=1,this.likes+=1):this.dislikes+=1,this.newComment=e.target.parentNode.previousSibling.value,setTimeout((()=>{e.target.parentNode.previousSibling.value=""}),0),fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create_message",phone:this.searchInput,message:this.newComment,rate:t})}).then((e=>(this.comments.unshift({message:this.newComment,rate:t,create_date:this.formattedDateTime()}),e.json()))).catch((e=>{console.log("Произошла ошибка:",e)}))},createTable(){this.isCreate=!1,fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"search_phone",phone:this.searchInput})}).then((e=>e.json())).catch((e=>{console.log("Произошла ошибка:",e)}))},formattedDateTime(){let e=new Date;const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),s=String(e.getMinutes()).padStart(2,"0"),o=String(e.getSeconds()).padStart(2,"0");return`${t}-${n}-${a} ${r}:${s}:${o}`}}});var h={name:"SearchInput",setup(){const e=m(),t=(0,s.EW)((()=>e.searchInput)),n=(0,s.EW)((()=>e.isCreate)),a=t=>{let n=t.target.value.replace(/\D/g,"");t.target.value=n,""!==n.trim()&&n.length>6?e.changeSearchInput(n):e.isCreate=!1};return{searchInput:t,isCreate:n,changeSearchInput:a,createTable:e.createTable}}},d=n(1241);const p=(0,d.A)(h,[["render",u],["__scopeId","data-v-05e138ce"]]);var C=p,f=n(4232);const v={id:"searchResults"},g={class:"result-comments"},k={class:"result-likes"},b={class:"result-dislikes"};function _(e,t,n,a,r,o){return(0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("b",null,(0,f.v_)(this.searchValue),1),(0,s.Lk)("span",g,(0,f.v_)(this.commentsCount),1),(0,s.Lk)("span",k,"↑ "+(0,f.v_)(this.likes),1),(0,s.Lk)("span",b,"↓ "+(0,f.v_)(this.dislikes),1)])}var I={name:"SearchResults",setup(){const e=m(),t=(0,s.EW)((()=>e.searchInput)),n=(0,s.EW)((()=>e.commentsCount)),a=(0,s.EW)((()=>e.likes)),r=(0,s.EW)((()=>e.dislikes));return{searchValue:t,commentsCount:n,likes:a,dislikes:r}}};const S=(0,d.A)(I,[["render",_],["__scopeId","data-v-86477bfc"]]);var y=S,E={name:"HeaderComponent",setup(){return{}},components:{SearchInput:C,SearchResults:y}};const O=(0,d.A)(E,[["render",c],["__scopeId","data-v-d7221cbc"]]);var w=O;const T=e=>((0,s.Qi)("data-v-9e6d1a4e"),e=e(),(0,s.jt)(),e),j={id:"intro"},L=T((()=>(0,s.Lk)("h1",null,"Absolutely anonymous reviews",-1))),A=T((()=>(0,s.Lk)("p",null,"service for collecting anonymous statistics and conducting surveys",-1))),F=[L,A];function R(e,t,n,a,r,o){return(0,s.uX)(),(0,s.CE)("div",j,F)}var W={name:"IntroComponent",setup(){return{}}};const X=(0,d.A)(W,[["render",R],["__scopeId","data-v-9e6d1a4e"]]);var K=X;const x={id:"commentsContainer"};function N(e,t,n,a,r,o){const c=(0,s.g2)("Comment");return(0,s.uX)(),(0,s.CE)("div",x,[(0,s.bF)(c)])}const P={class:"comment-date"};function $(e,t,n,a,r,o){return(0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.comments,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,f.C4)(["comment-container",{"comment-dislike":!e.rate,"comment-like":1==e.rate}]),key:e.id},[(0,s.Lk)("p",null,(0,f.v_)(e.message),1),(0,s.Lk)("span",P,(0,f.v_)(e.create_date),1)],2)))),128)}var D={name:"CommentComponent",setup(){const e=m(),t=(0,s.EW)((()=>e.comments));return{comments:t}}};const H=(0,d.A)(D,[["render",$],["__scopeId","data-v-27efecd6"]]);var Q=H,J={name:"CommentsComponent",components:{Comment:Q}};const M=(0,d.A)(J,[["render",N],["__scopeId","data-v-5407d58e"]]);var V=M;const Y=e=>((0,s.Qi)("data-v-0429bcce"),e=e(),(0,s.jt)(),e),q={key:0,id:"createCommentContainer"},z=Y((()=>(0,s.Lk)("textarea",{id:"comment",placeholder:"Your comment"},null,-1))),B={class:"likes-container"};function G(e,t,n,a,r,o){return!a.isCreate&&"Empty"!=a.searchInput&&a.searchInput.length>1?((0,s.uX)(),(0,s.CE)("div",q,[z,(0,s.Lk)("div",B,[(0,s.Lk)("span",{class:"like-btn",onClick:t[0]||(t[0]=(...e)=>a.createComment&&a.createComment(...e))}),(0,s.Lk)("span",{class:"dislike-btn",onClick:t[1]||(t[1]=(...e)=>a.createComment&&a.createComment(...e))})])])):(0,s.Q3)("",!0)}var U={name:"CreateComment",setup(){const e=m(),t=(0,s.EW)((()=>e.newComment)),n=(0,s.EW)((()=>e.isCreate)),a=(0,s.EW)((()=>e.searchInput)),r=t=>{e.createComment(t)};return{newComment:t,isCreate:n,searchInput:a,createComment:r}}};const Z=(0,d.A)(U,[["render",G],["__scopeId","data-v-0429bcce"]]);var ee=Z,te={name:"App",components:{HeaderComponent:w,Intro:K,Comments:V,CreateComment:ee}};const ne=(0,d.A)(te,[["render",o]]);var ae=ne;const re=(0,r.Ey)(),se=(0,a.Ef)(ae);se.use(re),se.mount("#app")}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,s){if(!a){var o=1/0;for(l=0;l<e.length;l++){a=e[l][0],r=e[l][1],s=e[l][2];for(var c=!0,i=0;i<a.length;i++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[i])}))?a.splice(i--,1):(c=!1,s<o&&(o=s));if(c){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[a,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,o=a[0],c=a[1],i=a[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in c)n.o(c,r)&&(n.m[r]=c[r]);if(i)var l=i(n)}for(t&&t(a);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(l)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(3061)}));a=n.O(a)})();
//# sourceMappingURL=app.a51dbe6b.js.map